<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Illuminate Vinil</title>
    <link rel="stylesheet" href="style3.css">
</head>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
<body>

    <section style="background-color: white;">
        <div class="navbar">
            <div class="logo">
              <a href="index.html"><img src="FOTOS/Logo.png" alt="LOGO ILLUMINATE"></a>
            </div>

            <div class="search-box">
                <span class="icon"><img src="" alt=""></span>
                <input type="text" placeholder="Buscar...">
            </div>

            <div class="menu">
                <a href="#">MAIS PROCURADOS</a>
                <a href="#">LPS E VINIS</a>
                <a href="#">ARTISTAS</a>
                <a href="#">CONTATO</a>

                <ul class="navbar-nav">
                <li class="nav-item">
                    <!-- Ícone do carrinho com badge -->
                    <a class="nav-link carrinho-icon" href="#" id="abrir-carrinho">
                        <i class="bi bi-cart3"></i>
                        <span class="carrinho-badge" id="contador-carrinho">0</span>
                    </a>
                </li>
            </ul>
            <!-- Overlay do carrinho (fundo escuro) -->
            <div class="overlay-carrinho" id="overlay-carrinho"></div>

            <!-- Carrinho lateral -->
            <div class="carrinho-lateral" id="carrinho-lateral">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h4>Seu Carrinho</h4>
                    <button class="btn-close" id="fechar-carrinho"></button>
                </div>
                <div id="itens-carrinho">
                    <!-- Itens do carrinho serão adicionados aqui via JavaScript -->
                </div>
                <div class="total-carrinho">
                    Total: R$ <span id="total-carrinho">0.00</span>
                </div>
                <button class="btn btn-comprar w-100 mt-3">Finalizar Compra</button>
            </div>
        </div>
            </div>
        </div>
        <hr>
        <div class="produto">
            <div class="produto-container">
                <div class="produto-imagem">
                    <!-- Espaço para a imagem do produto -->
                    <img src="VINIS/APPETITE FOR DESTRUCTION-1.jpg" alt="APPETITE FOR DESTRUCTION - GUNS N' ROSES">
                </div>

                <div class="detalhes">
                    <h1 class="titulo">APPETITE FOR DESTRUCTION </h1>
                    <p class="artista">GUNS N' ROSES</p>

                    <div class="preco">R$ 480,90</div>
                    <div class="parcelamento">ou 12x de R$ 40,07</div>

                    <div class="quantidade">
                        <div class="menos">-</div>
                        <input type="text" class="quantidade-input" value="1">
                        <div class="mais">+</div>
                    </div>

                    <button class="buy-btn adicionar-carrinho" data-id="2" data-nome="APPETITE FOR DESTRUCTION - GUNS N' ROSES" data-preco="480.90" data-imagem="VINIS/APPETITE FOR DESTRUCTION-1.jpg">Adicionar ao carrinho</button>

                    <p class="aviso">Adicionar o produto no carrinho não garante a sua reserva. Finalize a compra e
                        garanta o seu produto!</p>

                    <div class="frete">
                        <h3 class="frete-titulo">Calcule o prazo de entrega</h3>
                        <div class="frete-input">
                            <input type="text" placeholder="CEP">
                            <button>Calcular</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            // Sistema de Carrinho de Compras
            let carrinho = [];
            const abrirCarrinhoBtn = document.getElementById('abrir-carrinho');
            const fecharCarrinhoBtn = document.getElementById('fechar-carrinho');
            const carrinhoLateral = document.getElementById('carrinho-lateral');
            const overlayCarrinho = document.getElementById('overlay-carrinho');
            const itensCarrinho = document.getElementById('itens-carrinho');
            const contadorCarrinho = document.getElementById('contador-carrinho');
            const totalCarrinho = document.getElementById('total-carrinho');
            const botaoAdicionar = document.querySelector('.adicionar-carrinho');

            function atualizarCarrinho() {
                itensCarrinho.innerHTML = '';
                let total = 0;
                let totalItens = 0;
                carrinho.forEach(item => {
                    total += item.preco * item.quantidade;
                    totalItens += item.quantidade;
                    const itemElement = document.createElement('div');
                    itemElement.className = 'item-carrinho';
                    itemElement.innerHTML = `<img src="${item.imagem || ''}" alt="${item.nome}" class="imagem-item-carrinho" onerror="this.style.display='none'"><div class="detalhes-item-carrinho"><div class="nome-item-carrinho">${item.nome}</div><div class="preco-item-carrinho">R$ ${item.preco.toFixed(2).replace('.', ',')} x ${item.quantidade}</div><button class="remover-item" data-id="${item.id}" style="background: #dc3545; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; margin-top: 5px; font-size: 12px;">Remover</button></div>`;
                    itensCarrinho.appendChild(itemElement);
                });
                totalCarrinho.textContent = total.toFixed(2).replace('.', ',');
                contadorCarrinho.textContent = totalItens;
                document.querySelectorAll('.remover-item').forEach(botao => {
                    botao.addEventListener('click', function() {
                        carrinho = carrinho.filter(item => item.id !== this.getAttribute('data-id'));
                        atualizarCarrinho();
                    });
                });
                if (carrinho.length === 0) {
                    itensCarrinho.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">Seu carrinho está vazio</p>';
                }
            }
            abrirCarrinhoBtn.addEventListener('click', function (e) {
                e.preventDefault();
                carrinhoLateral.classList.add('aberto');
                overlayCarrinho.classList.add('mostrar');
            });
            fecharCarrinhoBtn.addEventListener('click', function () {
                carrinhoLateral.classList.remove('aberto');
                overlayCarrinho.classList.remove('mostrar');
            });
            overlayCarrinho.addEventListener('click', function () {
                carrinhoLateral.classList.remove('aberto');
                overlayCarrinho.classList.remove('mostrar');
            });
            if (botaoAdicionar) {
                botaoAdicionar.addEventListener('click', function () {
                    const id = this.getAttribute('data-id');
                    const nome = this.getAttribute('data-nome');
                    const preco = parseFloat(this.getAttribute('data-preco'));
                    const imagem = this.getAttribute('data-imagem');
                    const quantidade = parseInt(document.querySelector('.quantidade-input').value) || 1;
                    const produtoExistente = carrinho.find(item => item.id === id);
                    if (produtoExistente) {
                        produtoExistente.quantidade += quantidade;
                    } else {
                        carrinho.push({id: id, nome: nome, preco: preco, imagem: imagem, quantidade: quantidade});
                    }
                    atualizarCarrinho();
                    const textoOriginal = this.textContent;
                    this.textContent = 'Adicionado!';
                    this.disabled = true;
                    setTimeout(() => {
                        this.textContent = textoOriginal;
                        this.disabled = false;
                    }, 1500);
                });
            }
            document.querySelector('.mais').addEventListener('click', function () {
                const input = document.querySelector('.quantidade-input');
                input.value = parseInt(input.value) + 1;
            });
            document.querySelector('.menos').addEventListener('click', function () {
                const input = document.querySelector('.quantidade-input');
                if (parseInt(input.value) > 1) {
                    input.value = parseInt(input.value) - 1;
                }
            });
            document.querySelector('.frete-input button').addEventListener('click', function () {
                const cepInput = document.querySelector('.frete-input input');
                const cep = cepInput.value.replace(/\D/g, '');
                if (cep.length === 8) {
                    alert('Frete calculado para o CEP: ' + cep);
                } else {
                    alert('Por favor, insira um CEP válido (8 dígitos)');
                }
            });

            // Botão Finalizar Compra
            document.querySelector('.btn-comprar').addEventListener('click', function() {
                if (carrinho.length === 0) {
                    alert('Seu carrinho está vazio. Adicione produtos antes de finalizar a compra.');
                    return;
                }
                
                // Salvar carrinho no localStorage
                localStorage.setItem('carrinhoPagamento', JSON.stringify(carrinho));
                
                // Redirecionar para página de pagamento
                window.location.href = 'pagamento.html';
            });

            atualizarCarrinho();
        </script>
</body>

</html>